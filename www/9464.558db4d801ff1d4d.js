"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9464],{9464:(Ie,N,d)=>{d.r(N),d.d(N,{HomePageModule:()=>Se});var v=d(6895),l=d(3906),T=d(4719),O=d(2905),s=d(5861),h=d(7423);const U=(0,h.fo)("Geolocation",{web:()=>d.e(4561).then(d.bind(d,4561)).then(r=>new r.GeolocationWeb)});var R=d(2263),M=d(2340),t=d(6353),E=d(5083),H=d(4844);function Y(r,i){1&r&&(t.TgZ(0,"ion-item")(1,"ion-label",16)(2,"h1"),t._UZ(3,"ion-skeleton-text",17),t.qZA(),t.TgZ(4,"p"),t._UZ(5,"ion-skeleton-text",18),t.qZA()(),t.TgZ(6,"ion-thumbnail",0),t._UZ(7,"ion-skeleton-text",19),t.qZA()()),2&r&&(t.xp6(3),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0))}function G(r,i){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,Y,8,3,"ion-item",15),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.skeletOns)}}function F(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-item",20),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.chooseItem(a))}),t.TgZ(1,"ion-label",16)(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t._UZ(6,"ion-icon",21),t.qZA()}if(2&r){const e=i.$implicit;t.xp6(3),t.Oqu(e.place),t.xp6(2),t.Oqu(e.city)}}function z(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-item",20),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.chooseItem2(a))}),t.TgZ(1,"ion-label",16)(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t._UZ(6,"ion-icon",21),t.qZA()}if(2&r){const e=i.$implicit;t.xp6(3),t.Oqu(e.place),t.xp6(2),t.Oqu(e.city)}}function W(r,i){1&r&&(t.TgZ(0,"ion-item",22),t._UZ(1,"ion-img",23),t.qZA())}let K=(()=>{class r{constructor(e,n,o,a){this.modalCtrl=e,this.avatar=n,this.viewCtrl=o,this.client=a,this.service=new google.maps.places.AutocompleteService,this.skeleton=!0,this.autocompleteItems=[],this.autocompleteItems2=[]}ngOnInit(){this.skeletOns=[{},{},{},{}],this.autocomplete={query2:this.locationAddress,query:""},console.log(this.locationAddress)}closeModal(){this.modalCtrl.dismiss({home:!0})}closeSearch(){}Show(){var e=this;return(0,s.Z)(function*(){yield R.A_.setOverlaysWebView({overlay:!1}),e.hideImage=!0})()}Hide(){var e=this;return(0,s.Z)(function*(){yield R.A_.setOverlaysWebView({overlay:!0}),e.hideImage=!1})()}updateSearch2(){var e=this;return(0,s.Z)(function*(){if(""!=e.autocomplete.query2){console.log(e.autocomplete.query2,e.LatLng);var n=new google.maps.LatLng(e.LatLng.lat,e.LatLng.lng);e.skeleton=!1,e.service.getPlacePredictions({input:e.autocomplete.query2,location:n,strictbounds:!0,radius:"2000",zoom:15,types:["geocode"],componentRestrictions:{country:[e.avatar.countryCode]}},(o,a)=>{e.autocompleteItems2=[],console.log(o,a),e.skeleton=!0,o?.forEach(c=>{e.autocompleteItems2.push({whole:c,full:c.description,place:c.structured_formatting.main_text,city:c.structured_formatting.secondary_text,searching:!0})})})}else e.autocompleteItems2=[]})()}updateSearch(){var e=this;return(0,s.Z)(function*(){if(""!=e.autocomplete.query){console.log(e.autocomplete.query,e.LatLng);var n=new google.maps.LatLng(e.LatLng.lat,e.LatLng.lng);e.skeleton=!1,e.service.getPlacePredictions({input:e.autocomplete.query,location:n,strictbounds:!0,radius:"2000",zoom:15,types:["geocode"],componentRestrictions:{country:[e.avatar.countryCode]}},(o,a)=>{e.autocompleteItems=[],console.log(o,a),e.skeleton=!0,o?.forEach(c=>{e.autocompleteItems.push({whole:c,full:c.description,place:c.structured_formatting.main_text,city:c.structured_formatting.secondary_text,searching:!0})})})}else e.autocompleteItems=[]})()}chooseItem(e){var n=this;return(0,s.Z)(function*(){yield n.viewCtrl.dismiss(e),console.log(e)})()}chooseOnMap(){var e=this;return(0,s.Z)(function*(){yield e.viewCtrl.dismiss({pinOnMap:!0})})()}chooseItem2(e){var n=this;return(0,s.Z)(function*(){n.autocomplete.query2=e.full;const o=yield n.client.geocode({params:{address:e.full,key:M.N.apiKey},timeout:5e3});console.log(o);var a=o[0].geometry.location;n.data=[{location:e.full,lat:a.lat(),lng:a.lng(),edited:!0}]})()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(l.IN),t.Y36(E.o),t.Y36(l.IN),t.Y36(H.Client))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-autocomplete"]],inputs:{LatLng:"LatLng",locationAddress:"locationAddress"},decls:23,vars:6,consts:[["slot","start"],["color","primary",3,"click"],["slot","icon-only","name","close"],["lines","none"],["color","success","name","locate"],["animated","true","placeholder","Enter Pick Up Location","showCancelButton","never",1,"search",3,"ngModel","ngModelChange","ionInput","ionFocus","ionBlur","ionCancel"],["color","primary","name","pin"],["animated","true","placeholder","Enter Destination","showCancelButton","never",1,"search2",3,"ngModel","ngModelChange","ionInput","ionFocus","ionBlur","ionCancel"],[1,"ion-no-padding"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["style","margin:0 auto;",4,"ngIf"],[1,"ion-padding"],["size","large","shape","round","color","primary","expand","block",3,"click"],["slot","icon-only","name","pin"],[4,"ngFor","ngForOf"],[1,"ion-margin"],[2,"width","80px",3,"animated"],[2,"width","130px",3,"animated"],[2,"width","30px","height","50px",3,"animated"],[3,"click"],["name","pin","slot","start"],[2,"margin","0 auto"],["src","../../assets/imgs/trip.svg"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.NdJ("click",function(){return n.closeModal()}),t._UZ(4,"ion-icon",2),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6," Enter Destination "),t.qZA()(),t.TgZ(7,"ion-item",3),t._UZ(8,"ion-icon",4),t.TgZ(9,"ion-searchbar",5),t.NdJ("ngModelChange",function(a){return n.autocomplete.query2=a})("ionInput",function(){return n.updateSearch2()})("ionFocus",function(){return n.Show()})("ionBlur",function(){return n.Hide()})("ionCancel",function(){return n.closeSearch()}),t.qZA()(),t.TgZ(10,"ion-item",3),t._UZ(11,"ion-icon",6),t.TgZ(12,"ion-searchbar",7),t.NdJ("ngModelChange",function(a){return n.autocomplete.query=a})("ionInput",function(){return n.updateSearch()})("ionFocus",function(){return n.Show()})("ionBlur",function(){return n.Hide()})("ionCancel",function(){return n.closeSearch()}),t.qZA()()(),t.TgZ(13,"ion-content",8)(14,"ion-list",3),t.YNc(15,G,2,1,"div",9),t.YNc(16,F,7,2,"ion-item",10),t.YNc(17,z,7,2,"ion-item",10),t.YNc(18,W,2,0,"ion-item",11),t.qZA()(),t.TgZ(19,"ion-footer",12)(20,"ion-button",13),t.NdJ("click",function(){return n.chooseOnMap()}),t._UZ(21,"ion-icon",14),t._uU(22," Choose on map "),t.qZA()()),2&e&&(t.xp6(9),t.Q6J("ngModel",n.autocomplete.query2),t.xp6(3),t.Q6J("ngModel",n.autocomplete.query),t.xp6(3),t.Q6J("ngIf",!n.skeleton),t.xp6(1),t.Q6J("ngForOf",n.autocompleteItems),t.xp6(1),t.Q6J("ngForOf",n.autocompleteItems2),t.xp6(1),t.Q6J("ngIf",!n.hideImage))},dependencies:[v.sg,v.O5,T.JJ,T.On,l.YG,l.Sm,l.W2,l.fr,l.Gu,l.gu,l.Xz,l.Ie,l.Q$,l.q_,l.VI,l.CK,l.Bs,l.sr,l.wd,l.j9],styles:[".search[_ngcontent-%COMP%], .search2[_ngcontent-%COMP%]{--box-shadow:none;color:var(--ion-color-dark);--background: var(--ion-color-light-shade);--icon-color: rgba(106, 186, 106, 0)}ion-skeleton-text[_ngcontent-%COMP%]{--background: rgba(0, 98, 255, .259)}"]}),r})();var J=d(6498),A=d(353),D=d(4241);function b(r=0,i=A.P){return(!(0,D.k)(r)||r<0)&&(r=0),(!i||"function"!=typeof i.schedule)&&(i=A.P),new J.y(e=>(e.add(i.schedule(j,r,{subscriber:e,counter:0,period:r})),e))}function j(r){const{subscriber:i,counter:e,period:n}=r;i.next(e),this.schedule({subscriber:i,counter:e+1,period:n},n)}var B=d(2866);function P(r=0,i,e){let n=-1;return(0,D.k)(i)?n=Number(i)<1?1:Number(i):(0,B.K)(i)&&(e=i),(0,B.K)(e)||(e=A.P),new J.y(o=>{const a=(0,D.k)(r)?r:+r-e.now();return e.schedule(V,a,{index:0,period:n,subscriber:o})})}function V(r){const{index:i,period:e,subscriber:n}=r;if(n.next(i),!n.closed){if(-1===e)return n.complete();r.index=i+1,this.schedule(r,e)}}var C=d(3725),$=d(7323),L=(()=>{return(r=L||(L={})).Normal="Normal",r.Hybrid="Hybrid",r.Satellite="Satellite",r.Terrain="Terrain",r.None="None",L;var r})();const u=(0,h.fo)("CapacitorGoogleMaps",{web:()=>d.e(111).then(d.bind(d,111)).then(r=>new r.CapacitorGoogleMapsWeb)});u.addListener("isMapInFocus",r=>{var i;const c=(null===(i=document.elementFromPoint(r.x,r.y)?.dataset)||void 0===i?void 0:i.internalId)===r.mapId;u.dispatchMapEvent({id:r.mapId,focus:c})});class X extends HTMLElement{constructor(){super()}connectedCallback(){if("ios"==h.dV.getPlatform()){this.style.overflow="scroll",this.style["-webkit-overflow-scrolling"]="touch";const i=document.createElement("div");i.style.height="200%",this.appendChild(i)}}}customElements.define("capacitor-google-map",X);class S{constructor(i){this.element=null,this.handleScrollEvent=()=>this.updateMapBounds(),this.id=i}static create(i,e){return(0,s.Z)(function*(){const n=new S(i.id);if(!i.element)throw new Error("container element is required");void 0===i.config.androidLiteMode&&(i.config.androidLiteMode=!1),n.element=i.element,n.element.dataset.internalId=i.id;const o=i.element.getBoundingClientRect();if(i.config.width=o.width,i.config.height=o.height,i.config.x=o.x,i.config.y=o.y,i.config.devicePixelRatio=window.devicePixelRatio,"android"==h.dV.getPlatform()&&n.initScrolling(),h.dV.isNativePlatform()&&(i.element={}),yield u.create(i),e){const a=yield u.addListener("onMapReady",c=>{c.mapId==n.id&&(e(c),a.remove())})}return n})()}enableClustering(){var i=this;return(0,s.Z)(function*(){return u.enableClustering({id:i.id})})()}disableClustering(){var i=this;return(0,s.Z)(function*(){return u.disableClustering({id:i.id})})()}addMarker(i){var e=this;return(0,s.Z)(function*(){return(yield u.addMarker({id:e.id,marker:i})).id})()}addMarkers(i){var e=this;return(0,s.Z)(function*(){return(yield u.addMarkers({id:e.id,markers:i})).ids})()}removeMarker(i){var e=this;return(0,s.Z)(function*(){return u.removeMarker({id:e.id,markerId:i})})()}removeMarkers(i){var e=this;return(0,s.Z)(function*(){return u.removeMarkers({id:e.id,markerIds:i})})()}destroy(){var i=this;return(0,s.Z)(function*(){return"android"==h.dV.getPlatform()&&i.disableScrolling(),i.removeAllMapListeners(),u.destroy({id:i.id})})()}setCamera(i){var e=this;return(0,s.Z)(function*(){return u.setCamera({id:e.id,config:i})})()}setMapType(i){var e=this;return(0,s.Z)(function*(){return u.setMapType({id:e.id,mapType:i})})()}enableIndoorMaps(i){var e=this;return(0,s.Z)(function*(){return u.enableIndoorMaps({id:e.id,enabled:i})})()}enableTrafficLayer(i){var e=this;return(0,s.Z)(function*(){return u.enableTrafficLayer({id:e.id,enabled:i})})()}enableAccessibilityElements(i){var e=this;return(0,s.Z)(function*(){return u.enableAccessibilityElements({id:e.id,enabled:i})})()}enableCurrentLocation(i){var e=this;return(0,s.Z)(function*(){return u.enableCurrentLocation({id:e.id,enabled:i})})()}setPadding(i){var e=this;return(0,s.Z)(function*(){return u.setPadding({id:e.id,padding:i})})()}getMapBounds(){var i=this;return(0,s.Z)(function*(){return u.getMapBounds({id:i.id})})()}initScrolling(){const i=document.getElementsByTagName("ion-content");for(let e=0;e<i.length;e++)i[e].scrollEvents=!0;window.addEventListener("ionScroll",this.handleScrollEvent),window.addEventListener("scroll",this.handleScrollEvent),window.addEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.addEventListener("change",()=>{setTimeout(this.updateMapBounds,500)}):window.addEventListener("orientationchange",()=>{setTimeout(this.updateMapBounds,500)})}disableScrolling(){window.removeEventListener("ionScroll",this.handleScrollEvent),window.removeEventListener("scroll",this.handleScrollEvent),window.removeEventListener("resize",this.handleScrollEvent),screen.orientation?screen.orientation.removeEventListener("change",()=>{setTimeout(this.updateMapBounds,1e3)}):window.removeEventListener("orientationchange",()=>{setTimeout(this.updateMapBounds,1e3)})}updateMapBounds(){if(this.element){const i=this.element.getBoundingClientRect();u.onScroll({id:this.id,mapBounds:{x:i.x,y:i.y,width:i.width,height:i.height}})}}setOnCameraIdleListener(i){var e=this;return(0,s.Z)(function*(){e.onCameraIdleListener&&e.onCameraIdleListener.remove(),e.onCameraIdleListener=i?yield u.addListener("onCameraIdle",e.generateCallback(i)):void 0})()}setOnBoundsChangedListener(i){var e=this;return(0,s.Z)(function*(){e.onBoundsChangedListener&&e.onBoundsChangedListener.remove(),e.onBoundsChangedListener=i?yield u.addListener("onBoundsChanged",e.generateCallback(i)):void 0})()}setOnCameraMoveStartedListener(i){var e=this;return(0,s.Z)(function*(){e.onCameraMoveStartedListener&&e.onCameraMoveStartedListener.remove(),e.onCameraMoveStartedListener=i?yield u.addListener("onCameraMoveStarted",e.generateCallback(i)):void 0})()}setOnClusterClickListener(i){var e=this;return(0,s.Z)(function*(){e.onClusterClickListener&&e.onClusterClickListener.remove(),e.onClusterClickListener=i?yield u.addListener("onClusterClick",e.generateCallback(i)):void 0})()}setOnClusterInfoWindowClickListener(i){var e=this;return(0,s.Z)(function*(){e.onClusterInfoWindowClickListener&&e.onClusterInfoWindowClickListener.remove(),e.onClusterInfoWindowClickListener=i?yield u.addListener("onClusterInfoWindowClick",e.generateCallback(i)):void 0})()}setOnInfoWindowClickListener(i){var e=this;return(0,s.Z)(function*(){e.onInfoWindowClickListener&&e.onInfoWindowClickListener.remove(),e.onInfoWindowClickListener=i?yield u.addListener("onInfoWindowClick",e.generateCallback(i)):void 0})()}setOnMapClickListener(i){var e=this;return(0,s.Z)(function*(){e.onMapClickListener&&e.onMapClickListener.remove(),e.onMapClickListener=i?yield u.addListener("onMapClick",e.generateCallback(i)):void 0})()}setOnMarkerClickListener(i){var e=this;return(0,s.Z)(function*(){e.onMarkerClickListener&&e.onMarkerClickListener.remove(),e.onMarkerClickListener=i?yield u.addListener("onMarkerClick",e.generateCallback(i)):void 0})()}setOnMyLocationButtonClickListener(i){var e=this;return(0,s.Z)(function*(){e.onMyLocationButtonClickListener&&e.onMyLocationButtonClickListener.remove(),e.onMyLocationButtonClickListener=i?yield u.addListener("onMyLocationButtonClick",e.generateCallback(i)):void 0})()}setOnMyLocationClickListener(i){var e=this;return(0,s.Z)(function*(){e.onMyLocationClickListener&&e.onMyLocationClickListener.remove(),e.onMyLocationClickListener=i?yield u.addListener("onMyLocationClick",e.generateCallback(i)):void 0})()}removeAllMapListeners(){var i=this;return(0,s.Z)(function*(){i.onBoundsChangedListener&&(i.onBoundsChangedListener.remove(),i.onBoundsChangedListener=void 0),i.onCameraIdleListener&&(i.onCameraIdleListener.remove(),i.onCameraIdleListener=void 0),i.onCameraMoveStartedListener&&(i.onCameraMoveStartedListener.remove(),i.onCameraMoveStartedListener=void 0),i.onClusterClickListener&&(i.onClusterClickListener.remove(),i.onClusterClickListener=void 0),i.onClusterInfoWindowClickListener&&(i.onClusterInfoWindowClickListener.remove(),i.onClusterInfoWindowClickListener=void 0),i.onInfoWindowClickListener&&(i.onInfoWindowClickListener.remove(),i.onInfoWindowClickListener=void 0),i.onMapClickListener&&(i.onMapClickListener.remove(),i.onMapClickListener=void 0),i.onMarkerClickListener&&(i.onMarkerClickListener.remove(),i.onMarkerClickListener=void 0),i.onMyLocationButtonClickListener&&(i.onMyLocationButtonClickListener.remove(),i.onMyLocationButtonClickListener=void 0),i.onMyLocationClickListener&&(i.onMyLocationClickListener.remove(),i.onMyLocationClickListener=void 0)})()}generateCallback(i){const e=this.id;return n=>{n.mapId==e&&i(n)}}}var I=d(5596);let Q=(()=>{class r{constructor(e,n){this.client=e,this.overlay=n,this.service=new google.maps.DistanceMatrixService,this.directions=new google.maps.DirectionsService}getAddress(e,n){var o=this;return(0,s.Z)(function*(){try{const a=yield o.client.reverseGeocode({params:{latlng:{lat:e,lng:n},key:M.N.apiKey},timeout:5e3});return console.log(a),a}catch(a){o.overlay.showAlert("GeoError",a)}})()}getLatLng(e){var n=this;return(0,s.Z)(function*(){try{return yield n.client.geocode({params:{address:e,key:M.N.apiKey},timeout:5e3})}catch(o){n.overlay.showAlert("GeoError",o),console.log(o)}})()}getDirections(e,n){return(0,s.Z)(function*(){})()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(H.Client),t.LFG(I.F))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ee=(()=>{class r{constructor(e,n){this.overlay=e,this.geocode=n,this.locationAddress="Loading.."}createMap(e,n){var o=this;return(0,s.Z)(function*(){try{o.newMap=yield S.create({id:"my-cool-map",element:e,apiKey:M.N.apiKey,config:{center:{lat:5.5122138,lng:7.4919135},zoom:8}}),o.LatLng={lat:n.coords.latitude,lng:n.coords.longitude},o.newMap.setMapType(L.Normal),o.newMap.enableTrafficLayer(!0),yield o.newMap.setCamera({animate:!0,animationDuration:500,zoom:15,coordinate:o.LatLng});const a=yield o.geocode.getAddress(o.LatLng.lat,o.LatLng.lng);o.actualLocation=a.data.results[0].formatted_address,o.locationAddress=a.data.results[1].address_components[0].long_name+" "+a.data.results[1].address_components[1].long_name,o.newMap.enableCurrentLocation(!0)}catch(a){alert(a)}})()}CalculateCenter(e){return(0,s.Z)(function*(){var n=0,o=0;for(var a of e)o+=a.geoCode.longitude,n+=a.geoCode.latitude;return n/=e.length,o/=e.length,yield n,{latitude:n,longitude:o}})()}getBoundsZoomLevel(e,n){return(0,s.Z)(function*(){function c(Z){var x=Math.sin(Z*Math.PI/180),q=Math.log((1+x)/(1-x))/2;return Math.max(Math.min(q,Math.PI),-Math.PI)/2}function g(Z,x,q){return Math.floor(Math.log(Z/x/q)/Math.LN2)}var p=e.getNorthEast(),m=e.getSouthWest(),_=(c(p.lat())-c(m.lat()))/Math.PI,f=p.lng()-m.lng(),k=(f<0?f+360:f)/360,y=g(n.height,256,_),w=g(n.width,256,k);return yield Math.min(y,w,21),Math.min(y,w,21)})()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(I.F),t.LFG(Q))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const te=["map"],ne=["mapElement"];function ie(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-toolbar")(1,"ion-buttons",17)(2,"ion-button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.goBackTOAutocomplete())}),t._UZ(3,"ion-icon",19),t.qZA()(),t.TgZ(4,"ion-title"),t._uU(5," Your Destination "),t.qZA()()}}function oe(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-row",20)(1,"ion-list",21)(2,"ion-item-group",13)(3,"ion-button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showAutocompleteModal())}),t._UZ(4,"ion-icon",23),t.TgZ(5,"ion-label"),t._uU(6),t.qZA()()()()()}if(2&r){const e=t.oxw();t.xp6(6),t.Oqu(e.destinationAddress)}}function re(r,i){1&r&&(t.TgZ(0,"ion-fab",24)(1,"ion-fab-button",25),t._UZ(2,"ion-menu-button",26),t.qZA()())}function ae(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-fab",27),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.GotoSupport())}),t.TgZ(1,"ion-fab-button",25),t._UZ(2,"ion-icon",28),t.qZA()()}}function se(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-fab",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showAutocompleteModal())}),t.TgZ(1,"ion-fab-button",25),t._UZ(2,"ion-icon",30),t.qZA()()}}function le(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-fab",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.CancelRide())}),t.TgZ(1,"ion-fab-button",25),t._UZ(2,"ion-icon",32),t.qZA()()}}function ce(r,i){1&r&&(t.TgZ(0,"ion-fab",33)(1,"ion-avatar"),t._UZ(2,"ion-img",34),t.qZA()())}function ue(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-fab",35)(1,"ion-fab-button",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.resetLocation())}),t._UZ(2,"ion-icon",37),t.qZA()()}}function de(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-item",41),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.RequestRide(a))}),t._UZ(1,"ion-icon",42),t.TgZ(2,"ion-label")(3,"h1"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()}if(2&r){const e=i.$implicit;t.xp6(4),t.Oqu(e.place.place),t.xp6(2),t.Oqu(e.place.city)}}function me(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-list",38)(1,"ion-item-group",13)(2,"ion-button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showAutocompleteModal())}),t._UZ(3,"ion-icon",39),t.TgZ(4,"ion-label"),t._uU(5,"Where To?"),t.qZA()(),t.YNc(6,de,7,2,"ion-item",40),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.places)}}function ge(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-list",43)(1,"ion-list-header")(2,"ion-item",44),t._UZ(3,"img",45),t.qZA()(),t.TgZ(4,"ion-item-group",13)(5,"ion-button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.ReturnHome())}),t._UZ(6,"ion-icon",47),t.TgZ(7,"ion-label"),t._uU(8," No Drivers Here "),t.qZA()()()()}}function pe(r,i){if(1&r&&(t.TgZ(0,"ion-list-header",58)(1,"ion-item")(2,"ion-avatar",17),t._UZ(3,"ion-img",59),t.qZA(),t.TgZ(4,"ion-label")(5,"h1"),t._uU(6),t._UZ(7,"ion-icon",60),t.qZA(),t.TgZ(8,"p"),t._uU(9),t._UZ(10,"ion-icon",61),t._uU(11),t.qZA()()(),t.TgZ(12,"ion-item",62)(13,"ion-label")(14,"h1"),t._uU(15),t.qZA(),t.TgZ(16,"p")(17,"del"),t._uU(18),t.qZA()()()()()),2&r){const e=t.oxw(2);t.xp6(6),t.hij("",e.carname," "),t.xp6(3),t.hij("",e.driver_duration_apart," mins "),t.xp6(2),t.hij(" ",e.driver_number_of_seats," seats"),t.xp6(4),t.hij("$",e.price,""),t.xp6(3),t.hij("$",2*e.price,"")}}function _e(r,i){1&r&&(t.TgZ(0,"ion-list-header",58)(1,"ion-item",62)(2,"ion-avatar",17),t._UZ(3,"ion-skeleton-text",63),t.qZA(),t.TgZ(4,"ion-label")(5,"h1"),t._UZ(6,"ion-skeleton-text",64),t.qZA(),t.TgZ(7,"p"),t._UZ(8,"ion-skeleton-text",64)(9,"ion-skeleton-text",65),t.qZA()()(),t.TgZ(10,"ion-item",62)(11,"ion-label")(12,"h1"),t._UZ(13,"ion-skeleton-text",66),t.qZA(),t.TgZ(14,"p")(15,"del"),t._UZ(16,"ion-skeleton-text",66),t.qZA()()()()()),2&r&&(t.xp6(3),t.Q6J("animated",!0),t.xp6(3),t.Q6J("animated",!0),t.xp6(2),t.Q6J("animated",!0),t.xp6(1),t.Q6J("animated",!0),t.xp6(4),t.Q6J("animated",!0),t.xp6(3),t.Q6J("animated",!0))}function fe(r,i){1&r&&t._UZ(0,"ion-icon",67)}function he(r,i){1&r&&t._UZ(0,"ion-icon",68)}function ve(r,i){if(1&r&&(t.TgZ(0,"ion-select-option",69),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.Q6J("value",e.name),t.xp6(1),t.Oqu(e.name)}}function be(r,i){1&r&&t._UZ(0,"ion-icon",70)}function Ce(r,i){1&r&&t._UZ(0,"ion-progress-bar",71)}function ke(r,i){1&r&&(t.TgZ(0,"ion-label"),t._uU(1,"Book Ride"),t.qZA())}function ye(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-list",43),t.YNc(1,pe,19,5,"ion-list-header",48),t.YNc(2,_e,17,6,"ion-list-header",48),t.TgZ(3,"div",49)(4,"ion-item"),t.YNc(5,fe,1,0,"ion-icon",50),t.YNc(6,he,1,0,"ion-icon",51),t.TgZ(7,"ion-label",52),t._uU(8,"Select Payment"),t.qZA(),t.TgZ(9,"ion-select",53),t.NdJ("ionChange",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.chooseCard(o))}),t.YNc(10,ve,2,2,"ion-select-option",54),t.qZA()(),t.TgZ(11,"ion-item-group",13)(12,"ion-button",55),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.StartRide())}),t.YNc(13,be,1,0,"ion-icon",56),t.YNc(14,Ce,1,0,"ion-progress-bar",57),t.YNc(15,ke,2,0,"ion-label",1),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.price),t.xp6(1),t.Q6J("ngIf",!e.price),t.xp6(3),t.Q6J("ngIf",e.cash),t.xp6(1),t.Q6J("ngIf",!e.cash),t.xp6(3),t.Q6J("value",e.selectedCard),t.xp6(1),t.Q6J("ngForOf",e.cards),t.xp6(3),t.Q6J("ngIf",e.price),t.xp6(1),t.Q6J("ngIf",!e.price),t.xp6(1),t.Q6J("ngIf",e.price)}}function Ze(r,i){if(1&r&&(t.TgZ(0,"ion-list",43)(1,"ion-list-header")(2,"ion-item")(3,"ion-avatar",17),t._UZ(4,"ion-img",72),t.qZA(),t.TgZ(5,"ion-label")(6,"h1"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()()()(),t.TgZ(10,"ion-item-group",13)(11,"ion-button",73),t._UZ(12,"ion-progress-bar",74),t.qZA()()()),2&r){const e=t.oxw();t.xp6(4),t.Q6J("src",e.currentDriver.Driver_imgUrl),t.xp6(3),t.Oqu(e.currentDriver.Driver_name),t.xp6(2),t.hij("Arrives In ",e.duration,"")}}function Me(r,i){1&r&&(t.TgZ(0,"ion-item")(1,"ion-label")(2,"h1"),t._UZ(3,"ion-icon",84),t._uU(4," Cash"),t.qZA()()())}function Le(r,i){1&r&&(t.TgZ(0,"ion-item")(1,"ion-label")(2,"h1"),t._UZ(3,"ion-icon",85),t._uU(4," Card"),t.qZA()()())}function we(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-list",43)(1,"ion-list-header",75)(2,"ion-label")(3,"h1",76),t._uU(4),t.qZA()()(),t.TgZ(5,"div",49)(6,"ion-item")(7,"ion-item")(8,"ion-label")(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"h1"),t._uU(12),t.qZA()()(),t.TgZ(13,"ion-item",62)(14,"ion-avatar",17),t._UZ(15,"ion-img",72),t.qZA(),t.TgZ(16,"ion-label")(17,"p"),t._UZ(18,"ion-icon",77),t._uU(19),t.qZA()()()(),t.TgZ(20,"ion-item")(21,"ion-item")(22,"ion-label")(23,"h1"),t._uU(24),t.qZA(),t.TgZ(25,"p"),t._uU(26,"1,832 rides"),t.qZA()()()(),t.TgZ(27,"ion-item"),t.YNc(28,Me,5,0,"ion-item",1),t.YNc(29,Le,5,0,"ion-item",1),t.TgZ(30,"ion-item",62)(31,"ion-label")(32,"h1"),t._uU(33),t.qZA()()()(),t.TgZ(34,"ion-accordion-group")(35,"ion-accordion",78)(36,"ion-item",79)(37,"ion-label")(38,"h1"),t._uU(39,"More"),t.qZA()()(),t.TgZ(40,"div",80)(41,"ion-button",81),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.CallDriver())}),t._UZ(42,"ion-icon",82),t.TgZ(43,"ion-label"),t._uU(44,"contact"),t.qZA()(),t.TgZ(45,"ion-button",81),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.ClearRide())}),t._UZ(46,"ion-icon",83),t.TgZ(47,"ion-label"),t._uU(48,"Cancel ride"),t.qZA()()()()()()()}if(2&r){const e=t.oxw();t.xp6(4),t.hij("Driver Arrives in ",e.duration,""),t.xp6(6),t.AsE("",e.driverInfo.Driver_car,".",e.driverInfo.Driver_cartype,""),t.xp6(2),t.Oqu(e.driverInfo.Driver_plate),t.xp6(3),t.Q6J("src",e.driverInfo.Driver_imgUrl),t.xp6(4),t.hij(" ",e.driverInfo.Driver_rating," "),t.xp6(5),t.hij("Your Driver is ",e.driverInfo.Driver_name,""),t.xp6(4),t.Q6J("ngIf",e.cash),t.xp6(1),t.Q6J("ngIf",!e.cash),t.xp6(4),t.hij("$",e.price,"")}}function xe(r,i){1&r&&(t.TgZ(0,"ion-item")(1,"ion-label")(2,"h1"),t._UZ(3,"ion-icon",84),t._uU(4," Cash"),t.qZA()()())}function Te(r,i){1&r&&(t.TgZ(0,"ion-item")(1,"ion-label")(2,"h1"),t._UZ(3,"ion-icon",85),t._uU(4," Card"),t.qZA()()())}function Ae(r,i){if(1&r&&(t.TgZ(0,"ion-list",43)(1,"ion-list-header",75)(2,"ion-label")(3,"h1",76),t._uU(4),t.qZA()()(),t.TgZ(5,"div",49)(6,"ion-item")(7,"ion-item")(8,"ion-label")(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"h1"),t._uU(12),t.qZA()()(),t.TgZ(13,"ion-item",62)(14,"ion-avatar",17),t._UZ(15,"ion-img",72),t.qZA(),t.TgZ(16,"ion-label")(17,"p"),t._UZ(18,"ion-icon",86),t._uU(19," 5 "),t.qZA()()()(),t.TgZ(20,"ion-item")(21,"ion-item")(22,"ion-label")(23,"h1"),t._uU(24),t.qZA(),t.TgZ(25,"p"),t._uU(26,"1,832 rides"),t.qZA()()()(),t.TgZ(27,"ion-item"),t.YNc(28,xe,5,0,"ion-item",1),t.YNc(29,Te,5,0,"ion-item",1),t.TgZ(30,"ion-item",62)(31,"ion-label")(32,"h1"),t._uU(33),t.qZA()()()()()()),2&r){const e=t.oxw();t.xp6(4),t.hij("Arrival in ",e.duration,""),t.xp6(6),t.AsE("",e.driverInfo.Driver_car,".",e.driverInfo.Driver_cartype,""),t.xp6(2),t.Oqu(e.driverInfo.Driver_plate),t.xp6(3),t.Q6J("src",e.driverInfo.Driver_imgUrl),t.xp6(9),t.hij("Your Driver is ",e.driverInfo.Driver_name,""),t.xp6(4),t.Q6J("ngIf",e.cash),t.xp6(1),t.Q6J("ngIf",!e.cash),t.xp6(4),t.hij("$",e.price,"")}}const De=[{path:"",component:(()=>{class r{constructor(e,n,o,a,c,g,p,m,_,f){this.auth=e,this.map=n,this.nav=o,this.platform=a,this.firestore=c,this.database=g,this.ngZone=p,this.geocode=m,this.overlay=_,this.modalCtrl=f,this.profile=null,this.address="Unknown",this.cash=!1,this.state=[],this.showResetLocationButton=!1,this.destinationAddress="Drag To Pick Destination",this.locationAddress="Loading...",this.price=0,this.current_Request_Number=-1}ngOnInit(){var e=this;return(0,s.Z)(function*(){try{e.EnterBookingStage(),yield U.checkPermissions();const n=yield U.getCurrentPosition();e.coordinates=n,yield e.map.createMap(e.mapRef.nativeElement,n),e.mapy=!0,e.database.getCards().subscribe(o=>{console.log(o),e.cards=o,e.cards.forEach(a=>{console.log(a),1==a.selected&&(e.selected=a,e.selectedCard=a.name,"cash"==e.selectedCard&&(e.cash=!0),console.log(e.selectedCard))})}),e.database.getKnownPlaces().subscribe(o=>{e.places=o.slice(0,3),console.log(o)}),e.actualLocation=e.map.actualLocation,e.locationAddress=e.map.locationAddress,e.LatLng={lat:n.coords.latitude,lng:n.coords.longitude},e.map.newMap.setOnCameraIdleListener(o=>{e.ngZone.run(()=>{e.showResetLocationButton=!0})}),e.map.newMap.setOnCameraIdleListener(o=>{e.ngZone.run((0,s.Z)(function*(){if(console.log(o),e.mapPinStage){const a=yield e.geocode.getAddress(o.latitude,o.longitude);e.D_LatLng={lat:o.latitude,lng:o.longitude},e.actualDestination=e.map.actualLocation,e.destinationAddress=a.data.results[1].address_components[0].long_name+" "+a.data.results[1].address_components[1].long_name}}))}),yield e.map.newMap.enableCurrentLocation(!0),e.price=null}catch(n){e.overlay.showAlert("Error",n)}yield e.checkDriversAround(e.coordinates)})()}ionViewDidLeave(){this.listen&&this.listen.unsubscribe()}ionViewDidEnter(){var e=this;this.coordinates&&(this.listen=b(5e3).subscribe((0,s.Z)(function*(){yield e.checkDriversAround(e.coordinates)})))}simulateDriverAPP(){return(0,s.Z)(function*(){})()}checkDriversAround(e){var n=this;return(0,s.Z)(function*(){try{let o=[];const a=[e.coords.latitude,e.coords.longitude],c=5e5,g=yield n.database.checkDriversWithin(a,c);n.current_Request_Number=0,console.log("Should show drivers here  "+g),0==g.length?n.NoDrivers=!0:(n.NoDrivers=!1,console.log(g),n.drivers_Requested=[],n._carmarkers=[],g.forEach((p,m,_)=>{o.push(p.duration);const f=Math.min(...o);n.driver_duration_apart=f,p.duration<=1e3&&1==p.onlineState?(n.drivers_Requested.push(p),console.log(n.drivers_Requested),n.carname=n.drivers_Requested[0].Driver_car,n.driver_ID=n.drivers_Requested[0].Driver_id,n.driver_number_of_seats=n.drivers_Requested[0].seats,n.DriverLatLng={lat:n.drivers_Requested[0].Driver_lat,lng:n.drivers_Requested[0].Driver_lng}):Object.is(_.length-1,m)&&(n.NoDrivers=!0),n.closeDrivers=p}))}catch(o){n.overlay.showAlert("Error",o)}})()}chooseCard(e){var n=this;return(0,s.Z)(function*(){console.log(e),n.overlay.showLoader("Please wait.."),yield n.database.updateCArd(n.selected.name,n.selected.number,n.selected.type,n.selected.id,!1),n.cards.forEach(function(){var o=(0,s.Z)(function*(a){console.log(a),a.name==e.detail.value&&(yield n.database.updateCArd(a.name,a.number,a.type,a.id,!0),n.overlay.hideLoader())});return function(a){return o.apply(this,arguments)}}())})()}StartRide(){var e=this;return(0,s.Z)(function*(){try{e.marker1&&(yield e.map.newMap.removeMarker(e.marker1.toString()),e.marker1=null,console.log("removed ",e.marker1)),e.marker2&&(yield e.map.newMap.removeMarker(e.marker2.toString()),e.marker2=null,console.log("removed ",e.marker2)),e._carmarkers&&e._carmarkers.forEach(function(){var n=(0,s.Z)(function*(o){console.log(o,e._carmarkers),yield e.map.newMap.removeMarker(o),console.log("removed ",o),e._carmarkers=null});return function(o){return n.apply(this,arguments)}}()),e.map.newMap.enableCurrentLocation(!1),e.BookRide()}catch(n){e.overlay.showAlert("MArker Error",n)}})()}BookRide(){var e=this;return(0,s.Z)(function*(){yield e.overlay.showLoader(""),e.driver_marker&&(yield e.map.newMap.removeMarker(e.driver_marker),e.driver_marker=null),e.rider_marker&&(yield e.map.newMap.removeMarker(e.rider_marker),e.rider_marker=null);let n=e.drivers_Requested[e.current_Request_Number];const o=(0,C.JU)(e.firestore,"Request",n.Driver_id),a=(0,C.cf)((0,C.JU)(e.firestore,"Drivers",n.Driver_id),function(){var c=(0,s.Z)(function*(g){e.price&&1==g.data().onlineState?(a(),yield e.database.RequestRideWithRiderDetails(e.LatLng,e.destinationAddress,e.locationAddress,e.D_LatLng,n.Driver_id,e.price,e.cash),e.currentDriver=n,console.log(n),console.log(g.data()),e.DriverLatLng={lat:e.drivers_Requested[e.current_Request_Number].Driver_lat,lng:e.drivers_Requested[e.current_Request_Number].Driver_lng},yield e.createAndMoveMarkersOnRealtime(e.DriverLatLng,!1,!1),e.overlay.hideLoader(),e.EnterSearchingStage(),console.log("This is the driver "+n),e.startTimer(n,20),e.numCalls=P(2e4).subscribe((0,s.Z)(function*(){e.countDown.unsubscribe(),null!=e.drivers_Requested[e.current_Request_Number+1]?(e.current_Request_Number++,console.log(n),e.BookRide(),e.unsubscribe(),e.numCalls.unsubscribe(),console.log("requested another driver"+e.current_Request_Number)):(e.numCalls.unsubscribe(),e.unsubscribe(),e.GoHome(),console.log("No more Drivers To Request"+e.current_Request_Number),e.driver_marker&&(yield e.map.newMap.removeMarker(e.driver_marker.toString()),e.driver_marker=null),e.rider_marker&&(yield e.map.newMap.removeMarker(e.rider_marker.toString()),e.rider_marker=null))})),e.unsubscribe=(0,C.cf)(o,function(){var p=(0,s.Z)(function*(m){1==m.data().cancel&&(e.countDown.unsubscribe(),e.numCalls.unsubscribe(),e.drivers_Requested[e.current_Request_Number+1].Driver_id?(e.current_Request_Number++,e.BookRide(),e.unsubscribe(),console.log("requested another driver"+e.current_Request_Number)):(e.unsubscribe(),e.GoHome(),console.log("No more Drivers To Request"+e.current_Request_Number),e.driver_marker&&(yield e.map.newMap.removeMarker(e.driver_marker.toString()),e.driver_marker=null),e.rider_marker&&(yield e.map.newMap.removeMarker(e.rider_marker.toString()),e.rider_marker=null))),1==m.data().start&&(e.driverInfo=m.data(),e.canCheck&&(e.canCheck=!1,e.clearPrevMarkers(),e.updateDriverSubcription=P(4e3).subscribe((0,s.Z)(function*(){yield e.createAndMoveMarkersOnRealtime(e.D_LatLng,!0,!0),e.canCheck=!0}))),console.log(m.data()),e.EnterDrivingToDestinationStage(),1==m.data().cancel&&(e.overlay.showAlert(e.riderCleared?"You":"Driver","Cancelled"),e.unsubscribe(),e.GoHome())),1==m.data().stop&&(e.unsubscribe(),e.ClearRide(),yield e.database.createHistory(m.data()),e.countDown&&e.countDown.unsubscribe()),m.data().Driver_name&&0==m.data().stop&&0==m.data().start&&0==m.data().cancel&&(e.driverInfo=m.data(),e.countDown.unsubscribe(),e.numCalls.unsubscribe(),e.DriverLatLng={lat:m.data().Driver_lat,lng:m.data().Driver_lng},e.canCheck&&(e.canCheck=!1,e.clearPrevMarkers(),e.updateDriverSubcription=P(4e3).subscribe((0,s.Z)(function*(){e.canCheck=!0,yield e.createAndMoveMarkersOnRealtime(e.DriverLatLng,!0,!1)}))),console.log(m.data()),e.EnterTrackingStage())});return function(m){return p.apply(this,arguments)}}())):(e.countDown&&e.countDown.unsubscribe(),null!=e.drivers_Requested[e.current_Request_Number+1]?(e.current_Request_Number++,console.log(n),e.BookRide(),console.log("requested another driver"+e.current_Request_Number)):(e.GoHome(),e.overlay.showAlert("Busy","The Requested Driver is currently Busy, Please Try again"),console.log("No more Drivers To Request"+e.current_Request_Number)))});return function(g){return c.apply(this,arguments)}}())})()}startTimer(e,n){var o=this;this.countDown=b(1e3).subscribe((0,s.Z)(function*(){yield o.database.UpdateCountDown(n,e),0==--n&&o.countDown.unsubscribe()}))}goBackTOAutocomplete(){var e=this;return(0,s.Z)(function*(){e.marker1&&(yield e.map.newMap.removeMarker(e.marker1),e.marker1=null),e.marker2&&(yield e.map.newMap.removeMarker(e.marker2),e.marker2=null),e._carmarkers&&e._carmarkers.forEach(function(){var n=(0,s.Z)(function*(o){console.log(o,e._carmarkers),yield e.map.newMap.removeMarker(o),console.log("removed ",o)});return function(o){return n.apply(this,arguments)}}()),e.showAutocompleteModal()})()}showAutocompleteModal(){var e=this;return(0,s.Z)(function*(){const n={component:K,componentProps:{LatLng:e.LatLng,locationAddress:e.locationAddress},swipeToClose:!0},o=yield e.modalCtrl.create(n);o.present();const{data:a}=yield o.onWillDismiss();if(console.log(a),e.data=a,a.pinOnMap&&(e.EnterMapPinStage(),e.mapPinDrag=!0),a.home&&(e.EnterBookingStage(),yield e.map.newMap.setCamera({animate:!0,animationDuration:500,zoom:15,coordinate:e.LatLng})),a.searching){e.database.AddKnownPlace(a),e.destinationAddress=a.full,e.actualDestination=a.whole.full;const c=yield e.geocode.getLatLng(a.whole.description);e.D_LatLng={lat:c.data.results[0].geometry.location.lat,lng:c.data.results[0].geometry.location.lng},e.getDistanceandDirections()}})()}RequestRide(e){var n=this;return(0,s.Z)(function*(){if(n.NoDrivers)n.EnterNoDriverStage();else{n.destinationAddress=e.place.full,n.actualDestination=e.place.whole.full;const o=yield n.geocode.getLatLng(e.place.whole.description);n.D_LatLng={lat:o.data.results[0].geometry.location.lat,lng:o.data.results[0].geometry.location.lng},n.getDistanceandDirections()}})()}resetLocation(){var e=this;return(0,s.Z)(function*(){console.log(e.LatLng),yield e.map.newMap.setCamera({animate:!0,animationDuration:500,zoom:15,coordinate:e.LatLng}),e.showResetLocationButton=!1})()}getDistanceandDirections(){var e=this;return(0,s.Z)(function*(){if(e.listen&&e.listen.unsubscribe(),e.D_LatLng.lat){e.NoDrivers?e.EnterNoDriverStage():e.EnterConfirmStage();var n=new google.maps.LatLng(e.LatLng.lat,e.LatLng.lng),o=new google.maps.LatLng(e.D_LatLng.lat,e.D_LatLng.lng);if(!e.NoDrivers)var a={origin:n,destination:o,travelMode:google.maps.TravelMode.DRIVING};e.geocode.directions.route(a,function(){var c=(0,s.Z)(function*(g,p){"OK"==p?(e.direction=g,e.distance=g.routes[0].legs[0].distance.value,e.bounds=g.routes[0].bounds,e.price=e.distance/10,yield e.UpdateCarMarker(e.closeDrivers),yield e.createAndAddMarkers(e.LatLng,e.D_LatLng,e.bounds)):e.overlay.showAlert("Direction ERROR",JSON.stringify(g))});return function(g,p){return c.apply(this,arguments)}}())}else e.overlay.showAlert("Drag Map","Drag the map and stop on your required destination")})()}UpdateCarMarker(e){var n=this;return(0,s.Z)(function*(){let o={lat:e.Driver_lat,lng:e.Driver_lng};const a=yield n.map.newMap.addMarker({coordinate:o,iconUrl:"https://i.ibb.co/KDy365b/hatchback.png",title:"My 2"});a&&n._carmarkers.push(a.toString()),console.log(n._carmarkers,a.toString())})()}GoHome(){var e=this;return(0,s.Z)(function*(){yield e.map.newMap.enableCurrentLocation(!0),e.current_Request_Number=0,e.price=null,e.listen=b(5e3).subscribe((0,s.Z)(function*(){yield e.checkDriversAround(e.coordinates)})),e.EnterBookingStage(),yield e.map.newMap.setCamera({animate:!0,animationDuration:500,zoom:15,coordinate:e.LatLng})})()}GotoSupport(){var e=this;return(0,s.Z)(function*(){yield e.nav.navigateForward("support")})()}clearPrevMarkers(){var e=this;return(0,s.Z)(function*(){e.driver_marker&&(yield e.map.newMap.removeMarker(e.driver_marker.toString()),e.driver_marker=null),e.rider_marker&&(yield e.map.newMap.removeMarker(e.rider_marker.toString()),e.rider_marker=null)})()}ReturnHome(){var e=this;return(0,s.Z)(function*(){e.EnterBookingStage(),yield e.map.newMap.setCamera({animate:!0,animationDuration:500,zoom:15,coordinate:e.LatLng})})()}CancelRide(){var e=this;return(0,s.Z)(function*(){e.overlay.showLoader("Please Wait.."),e.driver_marker&&(yield e.map.newMap.removeMarker(e.driver_marker.toString()),e.driver_marker=null),e.rider_marker&&(yield e.map.newMap.removeMarker(e.rider_marker.toString()),e.rider_marker=null),e.unsubscribe(),e.numCalls.unsubscribe(),e.riderCleared=!0,yield e.database.cancelRide(e.currentDriver.Driver_id),yield e.map.newMap.enableCurrentLocation(!0),e.current_Request_Number=0,e.price=null,e.listen=b(5e3).subscribe((0,s.Z)(function*(){yield e.checkDriversAround(e.coordinates)})),e.EnterBookingStage(),e.overlay.hideLoader(),yield e.map.newMap.setCamera({animate:!0,animationDuration:500,zoom:15,coordinate:e.LatLng})})()}ClearRide(){var e=this;return(0,s.Z)(function*(){e.EnterBookingStage(),e.driver_marker&&(yield e.map.newMap.removeMarker(e.driver_marker),e.driver_marker=null),e.rider_marker&&(yield e.map.newMap.removeMarker(e.rider_marker),e.rider_marker=null),yield e.map.newMap.enableCurrentLocation(!0),e.current_Request_Number=0,e.price=null,e.listen=b(5e3).subscribe((0,s.Z)(function*(){yield e.checkDriversAround(e.coordinates)})),yield e.map.newMap.setCamera({animate:!0,animationDuration:500,zoom:15,coordinate:e.LatLng,bearing:0})})()}CallDriver(){return(0,s.Z)(function*(){})()}createAndMoveMarkersOnRealtime(e,n,o){var a=this;return(0,s.Z)(function*(){var c=new google.maps.LatLng(a.LatLng.lat,a.LatLng.lng),p={origin:new google.maps.LatLng(e.lat,e.lng),destination:c,travelMode:google.maps.TravelMode.DRIVING};a.geocode.directions.route(p,function(){var m=(0,s.Z)(function*(_,f){if("OK"==f){let k;a.bounds=_.routes[0].bounds,a.duration=_.routes[0].legs[0].duration.text,k=o?"https://i.ibb.co/bWx9V64/favourite.png":"https://i.ibb.co/KDy365b/hatchback.png",a.driver_marker=yield a.map.newMap.addMarker({coordinate:e,iconUrl:k,title:"My 2"}),a.rider_marker=yield a.map.newMap.addMarker({coordinate:a.LatLng,iconUrl:"https://i.ibb.co/N9LXGk3/home-1.png",title:"My 2"});const y=[{geoCode:{latitude:a.LatLng.lat,longitude:a.LatLng.lng}},{geoCode:{latitude:e.lat,longitude:e.lng}}];let w={lat:(yield a.map.CalculateCenter(y)).latitude,lng:(yield a.map.CalculateCenter(y)).longitude};n&&(yield a.map.newMap.setPadding({top:0,left:0,right:0,bottom:600}));let Z={height:a.mapRef.nativeElement.offsetHeight/2,width:a.mapRef.nativeElement.offsetWidth};yield a.map.newMap.setCamera({animate:!0,animationDuration:500,zoom:yield a.map.getBoundsZoomLevel(a.bounds,Z),coordinate:w,bearing:0}),a.canCheck=!0}else a.overlay.showAlert("Direction ERROR",JSON.stringify(_))});return function(_,f){return m.apply(this,arguments)}}())})()}createAndAddMarkers(e,n,o){var a=this;return(0,s.Z)(function*(){a.marker1=yield a.map.newMap.addMarker({coordinate:e,iconUrl:"https://i.ibb.co/N9LXGk3/home-1.png",title:"My 2"}),a.marker2=yield a.map.newMap.addMarker({coordinate:n,iconUrl:"https://i.ibb.co/bWx9V64/favourite.png",title:"My 2"});const c=[{geoCode:{latitude:e.lat,longitude:e.lng}},{geoCode:{latitude:n.lat,longitude:n.lng}}];let g={lat:(yield a.map.CalculateCenter(c)).latitude,lng:(yield a.map.CalculateCenter(c)).longitude},p={height:a.mapRef.nativeElement.offsetHeight/2,width:a.mapRef.nativeElement.offsetWidth};yield a.map.newMap.setCamera({animate:!0,animationDuration:500,zoom:yield a.map.getBoundsZoomLevel(o,p),coordinate:g,bearing:0})})()}EnterBookingStage(){this.bookingStage=!0,this.confirmStage=!1,this.trackingStage=!1,this.searchingStage=!1,this.noDriverStage=!1,this.mapPinStage=!1,this.drivingToDestinationStage=!1}EnterMapPinStage(){this.bookingStage=!1,this.confirmStage=!1,this.trackingStage=!1,this.searchingStage=!1,this.noDriverStage=!1,this.mapPinStage=!0,this.drivingToDestinationStage=!1}EnterConfirmStage(){this.bookingStage=!1,this.confirmStage=!0,this.trackingStage=!1,this.searchingStage=!1,this.noDriverStage=!1,this.mapPinStage=!1,this.drivingToDestinationStage=!1}EnterSearchingStage(){this.bookingStage=!1,this.confirmStage=!1,this.trackingStage=!1,this.searchingStage=!0,this.noDriverStage=!1,this.mapPinStage=!1,this.drivingToDestinationStage=!1}EnterNoDriverStage(){this.bookingStage=!1,this.confirmStage=!1,this.trackingStage=!1,this.searchingStage=!1,this.noDriverStage=!0,this.mapPinStage=!1,this.drivingToDestinationStage=!1}EnterTrackingStage(){this.bookingStage=!1,this.confirmStage=!1,this.trackingStage=!0,this.searchingStage=!1,this.noDriverStage=!1,this.mapPinStage=!1,this.drivingToDestinationStage=!1}EnterDrivingToDestinationStage(){this.bookingStage=!1,this.confirmStage=!1,this.trackingStage=!1,this.searchingStage=!1,this.mapPinStage=!1,this.noDriverStage=!1,this.drivingToDestinationStage=!0}}return r.\u0275fac=function(e){return new(e||r)(t.Y36($.gx),t.Y36(ee),t.Y36(l.SH),t.Y36(l.t4),t.Y36(C.gg),t.Y36(E.o),t.Y36(t.R0b),t.Y36(Q),t.Y36(I.F),t.Y36(l.IN))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-home"]],viewQuery:function(e,n){if(1&e&&(t.Gf(te,5),t.Gf(ne,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.mapRef=o.first),t.iGM(o=t.CRH())&&(n.mapElement=o.first)}},decls:26,vars:19,consts:[[1,"ion-no-border",3,"translucent"],[4,"ngIf"],["class","top_bar",4,"ngIf"],["vertical","top","horizontal","start",4,"ngIf"],["vertical","top","horizontal","end",3,"click",4,"ngIf"],["vertical","top","horizontal","start",3,"click",4,"ngIf"],["color","danger","vertical","top","horizontal","start",3,"click",4,"ngIf"],[3,"fullscreen"],["map",""],["class","centerPin","vertical","center","horizontal","center",4,"ngIf"],["vertical","top","horizontal","end",4,"ngIf"],["class","bottomItems shadow-top","lines","full",4,"ngIf"],["lines","full",1,"bottomItems","shadow-top",3,"hidden"],[1,"ion-margin-horizontal","ion-margin-bottom"],["shape","round","size","large","type","submit","expand","block",3,"click"],["slot","end","name","arrow-forward"],["class","bottomItems shadow-top","lines","none",4,"ngIf"],["slot","start"],["shape","round",3,"click"],["slot","icon-only","name","arrow-back","color","tertiary"],[1,"top_bar"],["lines","none"],["shape","round","size","large","type","submit","expand","block",1,"main-button",3,"click"],["slot","start","color","primary","name","create"],["vertical","top","horizontal","start"],["color","light"],["color","primary"],["vertical","top","horizontal","end",3,"click"],["color","primary","name","chatbubble-ellipses"],["vertical","top","horizontal","start",3,"click"],["name","arrow-back","color","primary"],["color","danger","vertical","top","horizontal","start",3,"click"],["name","trash-sharp","color","primary"],["vertical","center","horizontal","center",1,"centerPin"],["src","../../assets/icon/pin.png"],["vertical","top","horizontal","end"],["color","light",3,"click"],["name","locate"],["lines","full",1,"bottomItems","shadow-top"],["slot","start","name","search","color","primary"],["class","bottomItems ion-margin",3,"click",4,"ngFor","ngForOf"],[1,"bottomItems","ion-margin",3,"click"],["name","pin","color","primary","slot","start"],["lines","none",1,"bottomItems","shadow-top"],[2,"margin","0 auto"],["src","../../assets/imgs/No connection-pana.svg"],["shape","round","size","large","type","submit","color","primary","expand","block",1,"main-button",3,"click"],["slot","start","name","arrow-back"],["color","light","class","payment",4,"ngIf"],[1,"card"],["color","primary","slot","start","name","cash-sharp",4,"ngIf"],["color","primary","slot","start","name","card-sharp",4,"ngIf"],["position","floating"],[3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],["shape","round","color","primary","size","large","type","submit","expand","block",3,"click"],["slot","start","name","checkmark-sharp",4,"ngIf"],["color","light","type","indeterminate",4,"ngIf"],["color","light",1,"payment"],["src","../../assets/icon/hatchback.png"],["slot","icon-only","color","primary","name","information-circle"],["slot","icon-only","color","primary","name","person"],[1,"price"],[3,"animated"],[2,"width","130px",3,"animated"],[2,"width","100px",3,"animated"],[2,"width","80px",3,"animated"],["color","primary","slot","start","name","cash-sharp"],["color","primary","slot","start","name","card-sharp"],[3,"value"],["slot","start","name","checkmark-sharp"],["color","light","type","indeterminate"],[3,"src"],["shape","round","size","large","type","submit","expand","block",1,"main-button"],["type","indeterminate"],[1,"ion-margin-bottom"],[1,"ion-text-center"],["slot","icon-only","color","warning","name","star"],["value","first"],["slot","header"],["slot","content"],["shape","round","size","large","expand","block",1,"main-button",3,"click"],["color","primary","slot","start","name","person"],["color","primary","slot","start","name","close"],["color","primary","slot","icon-only","name","cash"],["color","primary","slot","icon-only","name","card"],["slot","icon-only","color","secondary","name","star"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header",0),t.YNc(1,ie,6,0,"ion-toolbar",1),t.YNc(2,oe,7,1,"ion-row",2),t.YNc(3,re,3,0,"ion-fab",3),t.YNc(4,ae,3,0,"ion-fab",4),t.YNc(5,se,3,0,"ion-fab",5),t.YNc(6,le,3,0,"ion-fab",6),t.qZA(),t.TgZ(7,"ion-content",7),t._UZ(8,"capacitor-google-maps",null,8),t.qZA(),t.YNc(10,ce,3,0,"ion-fab",9),t.TgZ(11,"ion-footer",0),t.YNc(12,ue,3,0,"ion-fab",10),t.TgZ(13,"ion-row"),t.YNc(14,me,7,1,"ion-list",11),t.TgZ(15,"ion-list",12)(16,"ion-item-group",13)(17,"ion-button",14),t.NdJ("click",function(){return n.getDistanceandDirections()}),t._UZ(18,"ion-icon",15),t.TgZ(19,"ion-label"),t._uU(20),t.qZA()()()(),t.YNc(21,ge,9,0,"ion-list",16),t.YNc(22,ye,16,9,"ion-list",16),t.YNc(23,Ze,13,3,"ion-list",16),t.YNc(24,we,49,10,"ion-list",16),t.YNc(25,Ae,34,9,"ion-list",16),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(1),t.Q6J("ngIf",n.confirmStage),t.xp6(1),t.Q6J("ngIf",n.confirmStage),t.xp6(1),t.Q6J("ngIf",n.bookingStage),t.xp6(1),t.Q6J("ngIf",!n.confirmStage),t.xp6(1),t.Q6J("ngIf",n.mapPinStage),t.xp6(1),t.Q6J("ngIf",n.searchingStage),t.xp6(1),t.Q6J("fullscreen",!0),t.xp6(3),t.Q6J("ngIf",n.mapPinStage),t.xp6(1),t.Q6J("translucent",!0),t.xp6(1),t.Q6J("ngIf",n.bookingStage&&n.showResetLocationButton),t.xp6(2),t.Q6J("ngIf",n.bookingStage),t.xp6(1),t.Q6J("hidden",!n.mapPinStage),t.xp6(5),t.Oqu(n.destinationAddress),t.xp6(1),t.Q6J("ngIf",n.noDriverStage),t.xp6(1),t.Q6J("ngIf",n.confirmStage),t.xp6(1),t.Q6J("ngIf",n.searchingStage),t.xp6(1),t.Q6J("ngIf",n.trackingStage),t.xp6(1),t.Q6J("ngIf",n.drivingToDestinationStage))},dependencies:[v.sg,v.O5,l.We,l.eh,l.BJ,l.YG,l.Sm,l.W2,l.IJ,l.W4,l.fr,l.Gu,l.gu,l.Xz,l.Ie,l.Ub,l.Q$,l.q_,l.yh,l.fG,l.X7,l.Nd,l.t9,l.n0,l.CK,l.sr,l.wd,l.QI],styles:["capacitor-google-maps[_ngcontent-%COMP%]{display:inline-block;width:100%;height:100vh}@keyframes slide-top{0%{transform:translateY(100%)}to{transform:translateY(0)}}.slide-top[_ngcontent-%COMP%]{animation:slide-top .5s cubic-bezier(.25,.46,.45,.94) both}.centerPin[_ngcontent-%COMP%]{animation-name:slide-top;animation-duration:.8s}.bottomItems[_ngcontent-%COMP%]{animation-name:slide-top;animation-duration:.5s}ion-skeleton-text[_ngcontent-%COMP%]{--background: rgba(0, 98, 255, .625)}ion-header[_ngcontent-%COMP%]   ion-fab[_ngcontent-%COMP%]{margin-top:20px}ion-header[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{padding-top:0vh;background:transparent;display:block}ion-header[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{border-radius:0 0 20px 20px;padding-bottom:0vh}ion-header[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%;--inner-padding-bottom: 0;--inner-padding-end: 0;--inner-padding-start: 0;--inner-padding-top: 0}ion-content[_ngcontent-%COMP%]{--background: transparent;margin-top:20px}ion-footer[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{padding-top:5vh;background:transparent;display:block}ion-footer[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{margin-right:2.5vh}ion-footer[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{border-radius:20px 20px 0 0}ion-footer[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem}ion-footer[_ngcontent-%COMP%]   ion-fab[_ngcontent-%COMP%]{margin-top:-40px}ion-footer[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{font-size:1.1em;--background: transparent !important}ion-footer[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-bottom: 1px;--inner-padding-end: 0;--inner-padding-start: 0;--inner-padding-top: 0;--background: transparent !important}.centerElem[_ngcontent-%COMP%]{justify-content:center;align-items:center}.price[_ngcontent-%COMP%]{margin-left:auto;flex:.5}.shadow-top[_ngcontent-%COMP%]{box-shadow:0 -1.5px 1.5px #c4c4c46a}.top_bar[_ngcontent-%COMP%]{box-shadow:0 1.5px 1.5px #c4c4c46a}.card[_ngcontent-%COMP%]{box-shadow:0 -1.5px 1.5px #c4c4c46a}.main-button[_ngcontent-%COMP%]{color:var(--ion-color-dark);--background: var(--ion-color-light-shade)}.preview[_ngcontent-%COMP%]{margin-top:50px;display:flex;justify-content:center}.fallback[_ngcontent-%COMP%]{width:128px;height:128px;border-radius:50%;background:#bfbfbf;display:flex;justify-content:center;align-items:center;font-weight:500}.map[_ngcontent-%COMP%]{width:100%;height:1024px;padding-bottom:100%}"]}),r})()}];let Pe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[O.Bz.forChild(De),O.Bz]}),r})(),Se=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[v.ez,T.u5,l.Pc,Pe]}),r})()}}]);