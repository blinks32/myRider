"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3131],{3131:(N,y,i)=>{i.r(y),i.d(y,{PaymentPageModule:()=>F});var f=i(6895),p=i(4719),a=i(3906),h=i(2905),u=i(5861),e=i(6353),_=i(5083),P=i(529),v=i(5596);const x=["paymentform"];function Z(o,r){1&o&&e._UZ(0,"ion-icon",17)}function b(o,r){1&o&&e._UZ(0,"ion-progress-bar",18)}function C(o,r){1&o&&(e.TgZ(0,"ion-label"),e._uU(1,"Proceed"),e.qZA())}function T(o,r){1&o&&e._UZ(0,"ion-icon",25)}function A(o,r){1&o&&e._UZ(0,"ion-icon",26)}function I(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-item",21),e.NdJ("click",function(){const l=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.chooseCard(l))}),e.TgZ(1,"ion-label")(2,"h1",2),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e._UZ(6,"ion-radio",22),e.YNc(7,T,1,0,"ion-icon",23),e.YNc(8,A,1,0,"ion-icon",24),e.qZA()}if(2&o){const t=r.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.type),e.xp6(1),e.Q6J("value",t.name),e.xp6(1),e.Q6J("ngIf",t.type==n.cash),e.xp6(1),e.Q6J("ngIf",t.type!=n.cash)}}function U(o,r){if(1&o&&(e.TgZ(0,"ion-radio-group",19),e.YNc(1,I,9,5,"ion-item",20),e.qZA()),2&o){const t=e.oxw();e.Q6J("value",t.selectedCard),e.xp6(1),e.Q6J("ngForOf",t.cards)}}function J(o,r){1&o&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._UZ(2,"ion-skeleton-text",28),e.qZA(),e._UZ(3,"ion-skeleton-text",29)(4,"ion-skeleton-text",30),e.qZA()),2&o&&(e.xp6(2),e.Q6J("animated",!0),e.xp6(1),e.Q6J("animated",!0),e.xp6(1),e.Q6J("animated",!0))}function Q(o,r){if(1&o&&(e.TgZ(0,"ion-list",13)(1,"ion-radio-group"),e.YNc(2,J,5,3,"ion-item",27),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.skeletOns)}}const Y=[{path:"",component:(()=>{class o{constructor(t,n,s,l,d,m){this.prof=t,this.nav=n,this.http=s,this.alertCtrl=l,this.overlay=d,this.formBuilder=m,this.stripe=Stripe("pk_test_0t85o0Llo0MbBfC9imSzznam"),this.cash="cash"}ionViewDidEnter(){this.skeletOns=[{},{},{},{},{}],this.setupStripe(),this.prof.getCards().subscribe(t=>{console.log(t),this.cards=t,this.cards.forEach(n=>{console.log(n),1==n.selected&&(this.selected=n,this.selectedCard=n.name,console.log(this.selectedCard))})})}chooseCard(t){var n=this;return(0,u.Z)(function*(){console.log(t),n.overlay.showLoader("Please wait.."),yield n.prof.updateCArd(n.selected.name,n.selected.number,n.selected.type,n.selected.id,!1),yield n.prof.updateCArd(t.name,t.number,t.type,t.id,!0),n.overlay.hideLoader()})()}setupStripe(){var t=this;return(0,u.Z)(function*(){let s=t.stripe.elements();t.card=s.create("card",{style:{base:{color:"#32325d",lineHeight:"24px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"17px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#3880ff"}}}),t.card.mount("#card-element"),t.card.addEventListener("change",m=>{document.getElementById("card-errors").textContent=m.error?m.error.message:""});var d=document.getElementById("payment-form");d.addEventListener("submit",m=>{m.preventDefault(),console.log(m,t.card),t.approve=!0,t.stripe.createSource(t.card).then(function(){var g=(0,u.Z)(function*(c){t.approve=!1,c.error?(document.getElementById("card-errors").textContent=c.error.message,t.overlay.showAlert("Payment Error",c.error.message)):(console.log(c.source.id),yield t.prof.updateCArd(t.selected.name,t.selected.number,t.selected.type,t.selected.id,!1),yield t.prof.createCard(c.source.card.last4,c.source.card.last4,c.source.card.brand,c.source.id),t.card.removeEventListener("change",B=>{}),d.removeEventListener("submit",B=>{}),yield t.overlay.showToast("Successfully Added Card!"),t.setupStripe())});return function(c){return g.apply(this,arguments)}}())})})()}showPayMentAlert(t,n,s){var l=this;return(0,u.Z)(function*(){(yield l.alertCtrl.create({header:t,subHeader:n,buttons:[{text:"Approve",role:"cancel",handler:()=>{s&&l.nav.pop()}}],backdropDismiss:!1})).present()})()}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.o),e.Y36(a.SH),e.Y36(P.eN),e.Y36(a.Br),e.Y36(v.F),e.Y36(p.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-payment"]],viewQuery:function(t,n){if(1&t&&e.Gf(x,5,e.SBq),2&t){let s;e.iGM(s=e.CRH())&&(n.stripeButton=s.first)}},decls:35,vars:6,consts:[[1,"ion-no-border",3,"translucent"],["slot","start"],["color","primary"],[1,"ion-text-center","ion-padding"],[1,"ion-text-center"],["action","/","method","post","id","payment-form"],[1,"form-row","ion-padding-bottom"],["id","card-element"],["id","card-errors","role","alert"],["shape","round","expand","block","size","large","type","submit","color","primary"],["color","light","slot","icon-only","name","checkmark-sharp",4,"ngIf"],["color","light","type","indeterminate",4,"ngIf"],[4,"ngIf"],["lines","none",1,"ion-padding-bottom"],[3,"value",4,"ngIf"],["lines","none","class","ion-padding-bottom",4,"ngIf"],["color","primary",1,"ion-text-center","test"],["color","light","slot","icon-only","name","checkmark-sharp"],["color","light","type","indeterminate"],[3,"value"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start",3,"value"],["color","success","slot","end","name","cash-sharp",4,"ngIf"],["color","primary","slot","end","name","card-sharp",4,"ngIf"],["color","success","slot","end","name","cash-sharp"],["color","primary","slot","end","name","card-sharp"],[4,"ngFor","ngForOf"],[3,"animated"],[2,"width","30px",3,"animated"],["slot","end",2,"width","30px",3,"animated"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e._UZ(4,"ion-back-button"),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6," Payment "),e.qZA()()(),e.TgZ(7,"ion-content",3)(8,"ion-list")(9,"ion-list-header",4)(10,"ion-label",2)(11,"h1"),e._uU(12,"Add New Card"),e.qZA()()(),e.TgZ(13,"ion-card")(14,"ion-card-content")(15,"form",5)(16,"div",6),e._UZ(17,"div",7)(18,"div",8),e.qZA(),e.TgZ(19,"ion-button",9),e.YNc(20,Z,1,0,"ion-icon",10),e.YNc(21,b,1,0,"ion-progress-bar",11),e.YNc(22,C,2,0,"ion-label",12),e.qZA()()()()(),e.TgZ(23,"ion-list",13)(24,"ion-list-header",4)(25,"ion-label",2),e._uU(26,"Payment Methods"),e.qZA()(),e.YNc(27,U,2,2,"ion-radio-group",14),e.qZA(),e.YNc(28,Q,3,1,"ion-list",15),e.TgZ(29,"ion-list-header")(30,"ion-label",16)(31,"h1"),e._uU(32,"Test Card"),e.qZA(),e.TgZ(33,"p"),e._uU(34,"4242424242424242 2/25 544 1324"),e.qZA()()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(20),e.Q6J("ngIf",!n.approve),e.xp6(1),e.Q6J("ngIf",n.approve),e.xp6(1),e.Q6J("ngIf",!n.approve),e.xp6(5),e.Q6J("ngIf",n.cards),e.xp6(1),e.Q6J("ngIf",!n.cards))},dependencies:[f.sg,f.O5,p._Y,p.JL,p.F,a.oU,a.YG,a.Sm,a.PM,a.FN,a.W2,a.Gu,a.gu,a.Ie,a.Q$,a.q_,a.yh,a.X7,a.B7,a.se,a.CK,a.sr,a.wd,a.U5,a.QI,a.cs],styles:["@keyframes slide-top{0%{transform:translateY(100%)}to{transform:translateY(0)}}.slide-top[_ngcontent-%COMP%]{animation:slide-top .5s cubic-bezier(.25,.46,.45,.94) both}ion-item[_ngcontent-%COMP%]{animation-name:slide-top;animation-duration:.5s}.test[_ngcontent-%COMP%]{animation-name:slide-top;animation-duration:.6s}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(Y),h.Bz]}),o})(),F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez,p.u5,a.Pc,p.UX,M]}),o})()}}]);